(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{135:function(t,e,a){t.exports=a(225)},140:function(t,e,a){},213:function(t){t.exports=JSON.parse("{}")},225:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(29),s=a.n(c),u=(a(140),a(79),a(30)),o=(a(142),a(114)),i=(a(144),a(116)),l=(a(145),a(112)),p=a(113),f=a(50),d=a(115),h=a(4),m=a.n(h),v=a(14),g=(a(81),a(34)),x=a.n(g),b=(a(165),a(35)),y=a(70),w=a.n(y),E=b.a.Header,j=b.a.Content,O=b.a.Footer,k=function(t){var e=t.children;return r.a.createElement(b.a,null,r.a.createElement(E,{className:w.a.header},r.a.createElement("div",{className:w.a.logo})),r.a.createElement(j,{style:{padding:"0 50px"}},r.a.createElement("div",{style:{padding:24,minHeight:"calc(100vh - 64px  - 69px)"}},e)),r.a.createElement(O,{style:{textAlign:"center"}},"\xa9React App"))},A=a(107),D=a(108),C=a(117),_=a(109),H=a(46),S=a(118),B=a(10),N=function(t){return new Promise((function(e){return setTimeout(e,t)}))},L=function(t){function e(t){var a;return Object(A.a)(this,e),(a=Object(C.a)(this,Object(_.a)(e).call(this,t))).play=Object(v.a)(m.a.mark((function t(){var e,n,r,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.props.data,a.prevDateData={},n=0;case 3:if(!(n<e.length)){t.next=13;break}return r=e[n],c=r.date,s=r.likeCounts,t.next=7,N();case 7:return a.setState({currentDate:c}),t.next=10,a.translateDate(s);case 10:n++,t.next=3;break;case 13:case"end":return t.stop()}}),t)}))),a.translateDate=function(t){var e=a.props.users,n=Object(H.a)(a),r=n.width,c=n.height,s=n.svg,u=n.yScale;return new Promise((function(n){var o=B.i().duration(100).on("end",n),i={},l=e.map((function(e){var n=(a.prevDateData[e]||0)+(t[e]||0);return i[e]=n,{name:e,value:n}})).sort((function(t,e){return B.a(t.value,e.value)}));a.prevDateData=i;var p=B.e(l,(function(t){return t.value})),f=B.g().range([0,r]).domain([0,p<10?10:p]),d=s.select(".x.axis");d.empty()&&(d=s.append("g").attr("class","x axis").attr("transform","translate(0,".concat(c,")"))),d.transition(o).call(B.b(f)).selectAll("g"),u.domain(l.map((function(t){return t.name})));var h=s.select(".y.axis");h.empty()&&(h=s.append("g").attr("class","y axis")),h.transition(o).call(B.c(u)).selectAll("g");var m=s.select(".bars-g");m.empty()&&(m=s.append("g").attr("class","bars-g"));var v=m.selectAll(".bar").data(l,(function(t){return t.name}));v.enter().append("g").append("rect").attr("class","bar").attr("x",0).style("fill",(function(){})).merge(v).transition(o).attr("height",(function(){return u.bandwidth()})).attr("y",(function(t){return u(t.name)})).attr("width",(function(t){return f(t.value)}));var g=m.selectAll(".label").data(l,(function(t){return t.name}));g.exit().remove(),g.enter().append("g").append("text").attr("class","label").attr("x",(function(t){return 0})).merge(g).transition(o).attr("y",(function(t){return u(t.name)+u.bandwidth()/2+4})).attr("x",(function(t){return f(t.value)+3})).tween("text",(function(t){var e=B.h(this),a=B.h(this).text(),n=t.value,r=B.d(a,n);return function(t){e.text(Math.round(r(t)))}}))}))},a.chart=r.a.createRef(),a.prevDateData={},a.state={currentDate:null},a}return Object(S.a)(e,t),Object(D.a)(e,[{key:"componentDidMount",value:function(){var t=0,e=40,a=30,n=120,r=this.chart.current.parentNode.clientWidth-n-e,c=this.chart.current.parentNode.clientHeight-t-a;this.width=r,this.height=c,this.svg=B.h(this.chart.current).attr("width",r+n+e).attr("height",c+t+a).append("g").attr("transform","translate(".concat(n,",").concat(t,")")),this.yScale=B.f().rangeRound([c,0],.1).padding(.4)}},{key:"render",value:function(){var t=this.state.currentDate;return r.a.createElement("div",null,r.a.createElement("h2",null,t),r.a.createElement("div",{style:{height:400}},r.a.createElement("svg",{ref:this.chart})))}}]),e}(r.a.Component),M=(a(213),"697c2ec6b9b7256e904120b7f59dba81d21bd507");function P(t){return R.apply(this,arguments)}function R(){return(R=Object(v.a)(m.a.mark((function t(e){var a,n,r,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=100,n=1,r=[];case 3:return t.next=5,fetch("https://qiita.com/api/v2/users/".concat(e,"/items?page=").concat(n,"&per_page=").concat(a),{mode:"cors",method:"get",headers:{Authorization:"Bearer ".concat(M),"Access-Control-Allow-Headers":"total-count","Access-Control-Expose-Headers":"total-count"}});case 5:return s=t.sent,t.next=8,s.json();case 8:c=t.sent,r=r.concat(c),n++;case 11:if(a===c.length){t.next=3;break}case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(t){return J.apply(this,arguments)}function J(){return(J=Object(v.a)(m.a.mark((function t(e){var a,n,r,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=100,n=1,r=[];case 3:return t.next=5,fetch("https://qiita.com/api/v2/items/".concat(e,"/likes?page=").concat(n,"&per_page=").concat(a),{mode:"cors",method:"get",headers:{Authorization:"Bearer ".concat(M),"Access-Control-Allow-Headers":"total-count","Access-Control-Expose-Headers":"total-count"}});case 5:return s=t.sent,t.next=8,s.json();case 8:c=t.sent,r=r.concat(c),n++;case 11:if(a===c.length){t.next=3;break}case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var q=function(){var t=Object(v.a)(m.a.mark((function t(e){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},t.next=3,Promise.all(e.map(function(){var t=Object(v.a)(m.a.mark((function t(e){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e);case 2:return n=t.sent,r=[],t.next=6,Promise.all(n.map(function(){var t=Object(v.a)(m.a.mark((function t(e){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e.id);case 2:a=t.sent,r=r.concat(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:r.forEach((function(t){var n=t.created_at,r=x()(n).format("YYYY-MM-DD");a[r]||(a[r]={}),a[r][e]||(a[r][e]=0),a[r][e]++}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return n={},e.forEach((function(t){n[t]=0})),r=[],Object.keys(a).forEach((function(t){r.push({date:t,likeCounts:Object(d.a)({},n,{},a[t])})})),r.sort((function(t,e){return x()(t.date)-x()(e.date)})),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=Object(n.useState)(Array(8).fill(null)),e=Object(f.a)(t,2),a=e[0],c=e[1],s=Object(n.useState)(null),d=Object(f.a)(s,2),h=d[0],g=d[1],x=Object(n.useState)(null),b=Object(f.a)(x,2),y=b[0],w=b[1],E=Object(n.useRef)(null);return r.a.createElement(k,null,r.a.createElement(o.a,{gutter:8},a.map((function(t,e){return r.a.createElement(i.a,{key:e,span:6,style:{marginBottom:8}},r.a.createElement(l.a,{value:t,onChange:function(t){var n=Object(p.a)(a);n[e]=t.target.value,c(n)}}))}))),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(u.a,{onClick:Object(v.a)(m.a.mark((function t(){var e,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.filter((function(t){return t})),t.next=3,q(e);case 3:n=t.sent,console.log(n),w(n),g(e);case 7:case"end":return t.stop()}}),t)})))},"\u53d6\u5f97"),r.a.createElement(u.a,{onClick:function(){E.current.play()},disabled:!y},"\u5b9f\u884c")),r.a.createElement("div",{style:{width:"100%",height:500}},r.a.createElement(L,{ref:E,data:y,users:h})))};var F=function(){return r.a.createElement(z,null)};s.a.render(r.a.createElement(F,null),document.getElementById("root"))},70:function(t,e,a){t.exports={header:"src-layouts-BasicLayout-index-module__header--2S57j",logo:"src-layouts-BasicLayout-index-module__logo--1Hx4w",spacer:"src-layouts-BasicLayout-index-module__spacer--1sAL6"}}},[[135,1,2]]]);
//# sourceMappingURL=main.dc3d5ee3.chunk.js.map