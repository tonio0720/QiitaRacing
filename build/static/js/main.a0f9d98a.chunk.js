(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{135:function(e,t,a){e.exports=a(225)},140:function(e,t,a){},213:function(e){e.exports=JSON.parse("{}")},225:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),s=a.n(c),o=(a(140),a(79),a(30)),u=(a(142),a(114)),i=(a(144),a(116)),l=(a(145),a(112)),p=a(113),f=a(31),d=a(115),h=a(3),m=a.n(h),v=a(13),b=(a(81),a(35)),x=a.n(b),g=(a(165),a(36)),y=a(70),j=a.n(y),w=g.a.Header,O=g.a.Content,E=g.a.Footer,k=function(e){var t=e.children;return r.a.createElement(g.a,null,r.a.createElement(w,{className:j.a.header},r.a.createElement("div",{className:j.a.logo})),r.a.createElement(O,{style:{padding:"0 50px"}},r.a.createElement("div",{style:{padding:24,minHeight:"calc(100vh - 64px  - 69px)"}},t)),r.a.createElement(E,{style:{textAlign:"center"}},"\xa9React App"))},A=a(107),D=a(108),_=a(117),C=a(109),S=a(47),H=a(118),B=a(10),N=function(e){return new Promise((function(t){return setTimeout(t,e)}))},P=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(_.a)(this,Object(C.a)(t).call(this,e))).play=Object(v.a)(m.a.mark((function e(){var t,n,r,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.data,a.prevDateData={},n=0;case 3:if(!(n<t.length)){e.next=13;break}return r=t[n],c=r.date,s=r.likeCounts,e.next=7,N();case 7:return a.setState({currentDate:c}),e.next=10,a.translateDate(s);case 10:n++,e.next=3;break;case 13:case"end":return e.stop()}}),e)}))),a.translateDate=function(e){var t=a.props.users,n=Object(S.a)(a),r=n.width,c=n.height,s=n.svg,o=n.yScale;return new Promise((function(n){var u=B.i().duration(100).on("end",n),i={},l=t.map((function(t){var n=(a.prevDateData[t]||0)+(e[t]||0);return i[t]=n,{name:t,value:n}})).sort((function(e,t){return B.a(e.value,t.value)}));a.prevDateData=i;var p=B.e(l,(function(e){return e.value})),f=B.g().range([0,r]).domain([0,p<10?10:p]),d=s.select(".x.axis");d.empty()&&(d=s.append("g").attr("class","x axis").attr("transform","translate(0,".concat(c,")"))),d.transition(u).call(B.b(f)).selectAll("g"),o.domain(l.map((function(e){return e.name})));var h=s.select(".y.axis");h.empty()&&(h=s.append("g").attr("class","y axis")),h.transition(u).call(B.c(o)).selectAll("g");var m=s.select(".bars-g");m.empty()&&(m=s.append("g").attr("class","bars-g"));var v=m.selectAll(".bar").data(l,(function(e){return e.name}));v.enter().append("g").append("rect").attr("class","bar").attr("x",0).style("fill",(function(){})).merge(v).transition(u).attr("height",(function(){return o.bandwidth()})).attr("y",(function(e){return o(e.name)})).attr("width",(function(e){return f(e.value)}));var b=m.selectAll(".label").data(l,(function(e){return e.name}));b.exit().remove(),b.enter().append("g").append("text").attr("class","label").attr("x",(function(e){return 0})).merge(b).transition(u).attr("y",(function(e){return o(e.name)+o.bandwidth()/2+4})).attr("x",(function(e){return f(e.value)+3})).tween("text",(function(e){var t=B.h(this),a=B.h(this).text(),n=e.value,r=B.d(a,n);return function(e){t.text(Math.round(r(e)))}}))}))},a.chart=r.a.createRef(),a.prevDateData={},a.state={currentDate:null},a}return Object(H.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=0,t=40,a=30,n=120,r=this.chart.current.parentNode.clientWidth-n-t,c=this.chart.current.parentNode.clientHeight-e-a;this.width=r,this.height=c,this.svg=B.h(this.chart.current).attr("width",r+n+t).attr("height",c+e+a).append("g").attr("transform","translate(".concat(n,",").concat(e,")")),this.yScale=B.f().rangeRound([c,0],.1).padding(.4)}},{key:"render",value:function(){var e=this.state.currentDate;return r.a.createElement("div",null,r.a.createElement("h2",null,e),r.a.createElement("div",{style:{height:400}},r.a.createElement("svg",{ref:this.chart})))}}]),t}(r.a.Component),q=(a(213),"6ab1aebe3d1999c206ae14ddbb366f6a65759bf2"),L="190fe6a7296c449bf9af82e3d25132e765ad8f3e",R=function(e){return new Promise((function(t){return setTimeout(t,e)}))},J="697c2ec6b9b7256e904120b7f59dba81d21bd507";function M(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(v.a)(m.a.mark((function e(t){var a,n,r,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=100,n=1,r=[];case 3:return e.next=5,R(100);case 5:return e.next=7,fetch("https://qiita.com/api/v2/users/".concat(t,"/items?page=").concat(n,"&per_page=").concat(a),{mode:"cors",method:"get",headers:{Authorization:"Bearer ".concat(J),"Access-Control-Allow-Headers":"total-count","Access-Control-Expose-Headers":"total-count"}});case 7:return s=e.sent,e.next=10,s.json();case 10:c=e.sent,r=r.concat(c),n++;case 13:if(a===c.length){e.next=3;break}case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return T.apply(this,arguments)}function T(){return(T=Object(v.a)(m.a.mark((function e(t){var a,n,r,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=100,n=1,r=[];case 3:return e.next=5,R(100);case 5:return e.next=7,fetch("https://qiita.com/api/v2/items/".concat(t,"/likes?page=").concat(n,"&per_page=").concat(a),{mode:"cors",method:"get",headers:{Authorization:"Bearer ".concat(J),"Access-Control-Allow-Headers":"total-count","Access-Control-Expose-Headers":"total-count"}});case 7:return s=e.sent,e.next=10,s.json();case 10:c=e.sent,r=r.concat(c),n++;case 13:if(a===c.length){e.next=3;break}case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(){var e=Object(v.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,Promise.all(t.map(function(){var e=Object(v.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return n=e.sent,r=[],e.next=6,Promise.all(n.map(function(){var e=Object(v.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t.id);case 2:a=e.sent,r=r.concat(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:r.forEach((function(e){var n=e.created_at,r=x()(n).format("YYYY-MM-DD");a[r]||(a[r]={}),a[r][t]||(a[r][t]=0),a[r][t]++}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return n={},t.forEach((function(e){n[e]=0})),r=[],Object.keys(a).forEach((function(e){r.push({date:e,likeCounts:Object(d.a)({},n,{},a[e])})})),r.sort((function(e,t){return x()(e.date)-x()(t.date)})),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function I(){return(I=Object(v.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://qiita.com/api/v2/access_tokens",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:q,client_secret:L,code:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,r=n.token,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(){var e=Object(n.useState)(Array(8).fill(null)),t=Object(f.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),d=Object(f.a)(s,2),h=d[0],b=d[1],x=Object(n.useState)(null),g=Object(f.a)(x,2),y=g[0],j=g[1],w=Object(n.useState)(null),O=Object(f.a)(w,2),E=O[0],A=O[1],D=Object(n.useState)(null),_=Object(f.a)(D,2),C=_[0],S=_[1],H=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=new URL(location.href).searchParams.get("code");e||(location.href="https://qiita.com/api/v2/oauth/authorize?client_id=".concat(q,"&scope=read_qiita")),A(e)}),[]),Object(n.useEffect)((function(){E&&function(e){return I.apply(this,arguments)}(E).then((function(e){S(e)}))}),[E]),r.a.createElement(k,null,r.a.createElement(u.a,{gutter:8},a.map((function(e,t){return r.a.createElement(i.a,{key:t,span:6,style:{marginBottom:8}},r.a.createElement(l.a,{value:e,onChange:function(e){var n=Object(p.a)(a);n[t]=e.target.value,c(n)}}))}))),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(o.a,{onClick:Object(v.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.filter((function(e){return e})),e.next=3,F(t);case 3:n=e.sent,console.log(n),j(n),b(t);case 7:case"end":return e.stop()}}),e)}))),disabled:!C},"\u53d6\u5f97"),r.a.createElement(o.a,{onClick:function(){H.current.play()},disabled:!y},"\u5b9f\u884c")),r.a.createElement("div",{style:{width:"100%",height:500}},r.a.createElement(P,{ref:H,data:y,users:h})))};var W=function(){return r.a.createElement(U,null)};s.a.render(r.a.createElement(W,null),document.getElementById("root"))},70:function(e,t,a){e.exports={header:"src-layouts-BasicLayout-index-module__header--2S57j",logo:"src-layouts-BasicLayout-index-module__logo--1Hx4w",spacer:"src-layouts-BasicLayout-index-module__spacer--1sAL6"}}},[[135,1,2]]]);
//# sourceMappingURL=main.a0f9d98a.chunk.js.map